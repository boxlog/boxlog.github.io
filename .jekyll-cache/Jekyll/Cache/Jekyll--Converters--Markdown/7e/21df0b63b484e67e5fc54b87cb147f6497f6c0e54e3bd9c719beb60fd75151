I"b<p>JPA를 사용하기로 마음먹었다면 가장 먼저 알아야 할 것이 영속성 컨텍스트 라고 생각합니다.</p>

<p>영어로 번역하면 Persistence Context 입니다.</p>

<p>먼저 영속성 컨텍스트를 이해하기 위해서는 JPA의 EntityManagerFactory와 EntityManager 를 알아야합니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">EntityManagerFactory</span> <span class="n">emf</span> <span class="o">=</span> <span class="nc">Persistence</span><span class="o">.</span><span class="na">createEntityManagerFactory</span><span class="o">(</span><span class="err">"</span><span class="n">name</span><span class="o">);</span>

<span class="nc">EntityManager</span> <span class="n">em</span> <span class="o">=</span> <span class="n">emf</span><span class="o">.</span><span class="na">createEntityManager</span><span class="o">();</span>
</code></pre></div></div>

<p><img src="/img/posts/jpa01.jpg" width="80%" align="center" /></p>

<hr />

<p><img src="/img/posts/jpa02.jpg" width="80%" align="center" /></p>

<p>사실 영속성 컨텍스트 같은 경우 논리적인 개념으로 실제 사용자가 볼 수 있는 것은 아닙니다.</p>

<p>즉 영속성 컨텍스트를 사용하기 위해선 그림에서 볼 수 있듯이 EntityManger를 사용해야합니다.</p>

<p>이 EntityMagager를 통해서 영속성 컨텍스트에 접근할 수 있게 됩니다.</p>

<p>하지만 EntityManger 도 자신의 인스턴스를 관리해줄 곳이 필요한데 그런 공간을 만들어 주는 곳이 EntityManagerFactory 입니다.</p>

<p>EntityMangerFactory 생성 시 커넥션 풀도 만들어 줍니다.</p>

<p>그리고 Factory같은 경우는 한번 생성하는데 비용이 많이 들기 때문에 한번 생성 후 애플리케이션 전체에 공유됩니다.</p>

:ET